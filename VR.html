<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Simple VR Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-billboard-component@0.1.1/dist/aframe-look-at-billboard-component.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #ui-container {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 1000;
        }
        .ui-button {
            background: rgba(30, 30, 30, 0.7);
            color: white;
            border: 2px solid white;
            border-radius: 10px;
            padding: 12px 24px;
            margin: 0 10px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .ui-button:hover {
            background: rgba(50, 50, 50, 0.9);
            transform: scale(1.05);
        }
        #score-display {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <a-scene 
        background="color: #1a1a2e" 
        vr-mode-ui="enabled: true"
        movement-controls="fly: true; speed: 0.5"
        physics="driver: cannon; gravity: 0;"
        renderer="antialias: true; colorManagement: true">

        <!-- Player with hand controls -->
        <a-entity id="player" 
                  movement-controls 
                  position="0 1.6 0">
            <a-entity camera look-controls wasd-controls position="0 0 0"></a-entity>
            
            <!-- Left hand controller -->
            <a-entity 
                id="left-hand"
                oculus-touch-controls="hand: left" 
                vive-controls="hand: left"
                windows-motion-controls="hand: left"
                daydream-controls="hand: left"
                gearvr-controls="hand: left"
                hand-controls="hand: left"
                laser-controls="hand: left">
                <a-sphere 
                    class="hand"
                    radius="0.05" 
                    color="#ff6b6b"
                    position="0 0 0">
                </a-sphere>
            </a-entity>
            
            <!-- Right hand controller -->
            <a-entity 
                id="right-hand"
                oculus-touch-controls="hand: right" 
                vive-controls="hand: right"
                windows-motion-controls="hand: right"
                daydream-controls="hand: right"
                gearvr-controls="hand: right"
                hand-controls="hand: right"
                laser-controls="hand: right">
                <a-sphere 
                    class="hand"
                    radius="0.05" 
                    color="#4ecdc4"
                    position="0 0 0">
                </a-sphere>
            </a-entity>
        </a-entity>

        <!-- Environment -->
        <a-entity id="environment">
            <!-- Ground -->
            <a-plane 
                position="0 0 -4" 
                rotation="-90 0 0" 
                width="30" 
                height="30" 
                color="#16213e"
                static-body>
            </a-plane>
            
            <!-- Sky -->
            <a-sky color="#0f3460"></a-sky>
            
            <!-- Floating objects to interact with -->
            <a-entity id="objects-container">
                <!-- These will be generated dynamically -->
            </a-entity>
            
            <!-- Simple walls to create boundaries -->
            <a-box position="0 2 -10" width="20" height="4" depth="0.5" color="#1a1a2e"></a-box>
            <a-box position="-10 2 0" width="0.5" height="4" depth="20" color="#1a1a2e"></a-box>
            <a-box position="10 2 0" width="0.5" height="4" depth="20" color="#1a1a2e"></a-box>
            <a-box position="0 2 10" width="20" height="4" depth="0.5" color="#1a1a2e"></a-box>
        </a-entity>

        <!-- Lighting -->
        <a-entity light="type: ambient; color: #444"></a-entity>
        <a-entity light="type: directional; color: #fff; intensity: 0.5" position="-1 5 2"></a-entity>
    </a-scene>

    <!-- UI Elements -->
    <div id="score-display">Score: <span id="score">0</span></div>
    
    <div id="ui-container">
        <button class="ui-button" onclick="enterVR()">Enter VR</button>
        <button class="ui-button" onclick="enterAR()">Enter AR</button>
    </div>

    <script>
        // Game variables
        let score = 0;
        const objects = [];
        
        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            generateObjects();
            setupEventListeners();
        });
        
        // Generate floating objects to interact with
        function generateObjects() {
            const container = document.getElementById('objects-container');
            const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#6a0572', '#1a936f'];
            const shapes = ['sphere', 'box', 'cylinder', 'cone', 'octahedron'];
            
            for (let i = 0; i < 15; i++) {
                const x = (Math.random() - 0.5) * 15;
                const y = Math.random() * 3 + 1;
                const z = (Math.random() - 0.5) * 15 - 4;
                
                const color = colors[Math.floor(Math.random() * colors.length)];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                
                let object;
                
                switch(shape) {
                    case 'sphere':
                        object = document.createElement('a-sphere');
                        object.setAttribute('radius', '0.5');
                        break;
                    case 'box':
                        object = document.createElement('a-box');
                        object.setAttribute('width', '1');
                        object.setAttribute('height', '1');
                        object.setAttribute('depth', '1');
                        break;
                    case 'cylinder':
                        object = document.createElement('a-cylinder');
                        object.setAttribute('radius', '0.5');
                        object.setAttribute('height', '1');
                        break;
                    case 'cone':
                        object = document.createElement('a-cone');
                        object.setAttribute('radius-bottom', '0.5');
                        object.setAttribute('radius-top', '0');
                        object.setAttribute('height', '1');
                        break;
                    case 'octahedron':
                        object = document.createElement('a-octahedron');
                        object.setAttribute('radius', '0.5');
                        break;
                }
                
                object.setAttribute('position', `${x} ${y} ${z}`);
                object.setAttribute('color', color);
                object.setAttribute('class', 'interactable');
                object.setAttribute('animation', `property: rotation; to: 0 360 0; loop: true; dur: ${5000 + Math.random() * 10000}`);
                object.setAttribute('animation__2', `property: position; dir: alternate; dur: 2000; to: ${x} ${y + 1} ${z}; loop: true`);
                
                // Add click/hover interaction
                object.setAttribute('event-set__mouseenter', '_event: mouseenter; scale: 1.2 1.2 1.2');
                object.setAttribute('event-set__mouseleave', '_event: mouseleave; scale: 1 1 1');
                
                container.appendChild(object);
                objects.push(object);
            }
        }
        
        // Set up event listeners for interactions
        function setupEventListeners() {
            const scene = document.querySelector('a-scene');
            
            // Handle controller interactions
            scene.addEventListener('controllerconnected', function(evt) {
                console.log('Controller connected:', evt.detail.name);
            });
            
            // Handle grabbing objects
            scene.addEventListener('gripdown', function(evt) {
                const hand = evt.target;
                const intersection = hand.components['laser-controls'].intersection;
                
                if (intersection && intersection.object.el.classList.contains('interactable')) {
                    const object = intersection.object.el;
                    object.setAttribute('animation', 'property: position; to: 0 0 0; dur: 200');
                    object.setAttribute('animation__2', 'property: scale; to: 0.5 0.5 0.5; dur: 200');
                    hand.appendChild(object);
                    
                    // Increase score when object is grabbed
                    score += 10;
                    document.getElementById('score').textContent = score;
                }
            });
            
            // Handle releasing objects
            scene.addEventListener('gripup', function(evt) {
                const hand = evt.target;
                const object = hand.querySelector('.interactable');
                
                if (object) {
                    hand.removeChild(object);
                    
                    // Add some physics to the thrown object
                    const direction = new THREE.Vector3();
                    hand.object3D.getWorldDirection(direction);
                    
                    object.setAttribute('position', '0 0 0');
                    object.object3D.position.copy(hand.object3D.worldToLocal(
                        hand.object3D.localToWorld(new THREE.Vector3(0, 0, 0)).add(direction.multiplyScalar(2))
                    ));
                    
                    scene.appendChild(object);
                    
                    // Reset animations
                    object.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 5000');
                    object.setAttribute('animation__2', '');
                    object.setAttribute('scale', '1 1 1');
                }
            });
        }
        
        // Enter VR mode
        function enterVR() {
            const scene = document.querySelector('a-scene');
            if (scene.hasAttribute('vr-mode')) {
                scene.exitVR();
            } else {
                scene.enterVR();
            }
        }
        
        // Enter AR mode (if available)
        function enterAR() {
            const scene = document.querySelector('a-scene');
            if (scene.hasAttribute('ar-mode')) {
                scene.exitAR();
            } else {
                scene.enterAR();
            }
        }
    </script>
</body>
</html>
